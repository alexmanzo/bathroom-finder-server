# All-Gender Bathroom Finder

## Summary

This is the server behind the [All-Gender Bathroom Finder App.](https://github.com/alexmanzo/bathroom-finder-app)

Functionality of the server includes:

*   GET all bathroom locations.
*   GET bathroom locations based on geography.
*   GET bathroom locations based on query.
*   POST new bathroom locations, with checks for unique locations.
*   DELETE bathroom locations by ID.
*   PUT bathroom locations by ID

## Requirements

1. Install MongoDB locally on your machine.
https://zellwk.com/blog/install-mongodb/

1. Set up the database
`mongoexport -h ds163053.mlab.com:63053 -d bathroom-finder -c locations -u admin2  -p password1 -o ~/db/data`
`mongoimport --db bathroom-finder --collection locations --drop --file ~/db/data`
1. run mongod
1. run npm run dev
1. `npm install`

## API Documentation

**Base URL:** https://gentle-lake-28954.herokuapp.com/api

### GET Locations

_/locations_

Returns all locations.

_/locations/geography?lat=VALUE&lng=VALUE_

Returns all locations based on latitude and longitude.

_/locations/search?query_

Returns locations by query.

_/locations/id/:id_

Returns locations by ID.

### POST Locations

_/locations_

Posts new location to the server. First searches server based on location name and zipcode to check for unique values.

### PUT Location

_/locations/:id_

Edits & returuns location

### DELETE Location

_/locations/:id_

Deletes location

### Location Object

`{ "_id": "5c32bc8ccdfffe0017336520", "loc": { "type": "Point", "coordinates": [ -78.9577334, 36.0403879 ] }, "type": [ "restaurant", "point_of_interest", "food", "establishment" ], "googlePlaceId": [ "ChIJ24c6XRHhrIkRA18898mTQ6Y" ], "name": "Picnic", "street": "1647 Cole Mill Road", "city": "Durham", "state": "NC", "zip": "27705", "dist": { "calculated": 0 } }`

**_id**: Generated by server when location is created

**loc**: Location object for Mongoose. Type is always Point. Coordinates MUST be longitude first, latitude second.

**type**: Array pulled from Google Places API.

**googlePlaceId**: ID for Google Places API.

**name**: Name of location.

**street**: Street Address.

**city**: City

**state**: State.

**zip**: Zipcode (String)

**dist**: Returned from _/locations/geography_ endpoint. Distance in meters from queried location.

## Technologies Used

This server was created using the following technologies:

*   Node.js
*   Express
*   MongoDB
*   Mongoose
*   Mocha/Chai Testing
*   Travis CI

## Author

This project was created by Alex Manzo.